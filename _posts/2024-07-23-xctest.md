---
layout: posts
title: "XCTest"
date: 2024-07-23 13:00:00 +0900
---

우리가 프로그래밍을 통해 무언가를 만들어낼 때 다음과 같은 과정을 밟습니다.

> 요구사항 분석 -> 상세 설계 -> 개발 구현 -> 시험 검증 -> 배포와 개선

분석, 설계, 구현 그리고 배포의 과정은 당연하게 느껴집니다. 그렇다면 시험 검증의 단계는 왜 필요할까요 ?

# 왜 ?

앞서 개발의 과정을 단방향으로 표현했지만, 사실 단방향의 개발 과정은 좋지 않습니다.

분석에 1주일을 쓰고, 설계에 1달을, 구현에 3주를 썼다고 해봅시다. 그 하지만 구현이 제대로 작동하지 않는다면 ?

거의 3달을 날리는 셈이 됩니다..😥

그래서 점진적이고 반복적인 작업으로 나눌 필요가 있습니다.

설계를 하다가 다시 분석으로, 구현을 하다가 다시 설계로 돌아갈 수 있습니다.

> 요구사항 분석 `<->` 상세 설계 `<->` 개발 구현 `<->` 시험 검증 `<->` 배포와 개선

다시 시험 검증 얘기로 돌아오면, 구현이 옳바르게 되었는가를 판단하기 위한 장치입니다.

시험 검증을 통해 빠르게 오류를 찾을 수 있고 이전의 과정으로 돌아갈 수 있습니다.

# Unit test

Xcode에서의 유닛 테스트(Unit Testing)는 소프트웨어 개발 과정에서 코드의 특정 부분(유닛)의 기능을 검증하기 위해 사용됩니다.
유닛 테스트는 개별 함수나 메서드가 예상대로 작동하는지 확인하는 데 중점을 둡니다. Xcode에서는 XCTest 프레임워크를 사용하여 유닛 테스트를
작성하고 실행할 수 있습니다.

이상적인 테스트는 각 클래스와 메소드에 대한 **단위(Unit) 테스트**가 대부분을 차지하고 있어야 합니다. 유닛 테스트의 특성은 읽기 쉽고, 문제가
발생했을 때 깔끔한 실패 메시지를 생성하며, 빠르게 수행된다는 것입니다.

## Arrange-Act-Assert 패턴

- Arrange: 테스트에 필요한 객체와 데이터를 준비합니다.
- Act: 테스트할 메서드나 기능을 실행합니다.
- Assert: 실행 결과가 기대한 결과와 일치하는지 확인합니다.

```swift
import XCTest

// 테스트할 클래스
class SimpleMath {
    func add(_ a: Int, _ b: Int) -> Int {
        return a + b
    }
}

// 유닛 테스트 클래스
final class SimpleMathTests: XCTestCase {

    func testAddition() {
        // Arrange
        let math = MyMath()
        let a = 2
        let b = 3

        // Act
        let result = math.add(a, b)

        // Assert
        XCTAssertEqual(result, 5, "Addition should be equal to 5")
    }
}
```

## 무엇을 테스트 해야할까 ?

- Right

    당연한 얘기지만 어떤 입력에 대한 옳바른 결과가 나오는지 확인해야 합니다.
    
- Boundary

    경계 조건에 대해서 만족하는가 ?
    
- Inverse

    역의 관계를 확인할 수 있는가 ?
    
- Cross-check

    다른 수단을 통해 역으로 교차 확인할 수 있는가 ?
    
- Error condition

    에러 조건을 강제로 만들 수 있는가 ?
    
- Performance

    성능이 한도내에 있는가 ?

다음과 같은 사항을 함께 고려하면 좋은 테스트를 작성할 수 있습니다.
