---
layout: posts
title: "Git"
date: 2024-07-31 10:00:00 +0900
---

프로젝트를 진행하며 협업을 위해 Git을 많이 사용합니다. 저는 이제 기계적으로 `add`, `status`, `commit`, `push`, `pull` 명령을 수행합니다.
어떤 방식으로 이러한 시스템이 유지가 되는가 보다는, 이렇게 하면 잘 되는구나에 그친 수준을 가지고 있습니다.

그래서 Git의 내부를 한 번 파해치는 시간을 가져보도록 합니다.

# VCS

버전 관리 시스템(Version Control System)은 파일 변화를 시간에 따라 기록했다가 나중에 특정 시점의 버전을 다시 꺼내올 수 있는 시스템입니다.
VCS를 사용하면 각 파일이나 프로젝트를 통째로 이전 상태로 되돌릴 수 있고, 시간에 따라 수정 내용을 비교해 볼 수도, 누가 문제를 일으켰는지도 추적할 수도,
그리고 파일을 잃어버리거나 잘못 고쳤을 때도 쉽게 복구할 수 있습니다.

이런 모든 장점을 이용할 수 있도록 하는 것이 VCS입니다. Git은 VCS중에서도 DVCS(분산 버전 관리 시스템)로 원격 서버에도 파일 혹은 프로젝트의 정보가 있습니다.

# Git의 내부 객체

## Commit

Git에서 가장 중요한 객체라고 볼 수 있습니다. 세가지 주요 요소를 가지는데, 부모 커밋의 참조와 커밋 메시지, 그리고 트리의 정보를 가집니다.커밋 메시지는 우리가
커밋 커밋을 할 때 남기는 메시지 정보입니다.

부모 커밋의 참조를 가리키는데, 이를 역추적하면 커밋 기록을 모두 확인할 수 있습니다. 그리고 다음에 설명할 트리 객체로 커밋간 변화를 알아볼 수도 있습니다.

## Tree

파일 시스템의 디렉토리와 비슷하며, 트리 객체에는 파일의 이름, 서브 트리, Blob 객체의 정보를 가집니다.

![Git_Tree](/assets/image/git_tree.png)

## Blob

Binary Large OBject를 뜻하며, 파일에 대한 객체입니다.

SHA1으로 파일의 내용을 식별가능합니다.

앞선 커밋, 트리 객체와 해당 Blob 객체는 모두 불변성을 가집니다.

파일을 수정하고 커밋을 진행하면, 기존의 Blob을 수정하는 것이 아닌 새로운 Blob 객체를 생성합니다.

## 관계도

![Git_all_object](/assets/image/git_all_object.png)

그림처럼 각 커밋은 이전의 커밋과 트리를 가리키고, 트리는 Blob을 포함하고 있습니다.

## 스테이지

커밋을 준비하는 공간이며, `add`명령어를 통해 파일을 추가할 수 있습니다.

스테이지 전체 내용에 대한 트리를 생성하며, 생성된 트리로 커밋을 만듭니다.

# 참고

[Git Book](https://git-scm.com/book/ko/v2)
